---
interface Props {
  color?: 'primary' | 'secondary'
  class?: string
  showExternalIcon?: boolean
  href?: string
  [key: string]: any
}

const {
  color = 'primary',
  class: className, // Renamed this to avoid keyword conflict
  showExternalIcon = false,
  href,
  ...rest
} = Astro.props

import extIcon from '@graphics/Icons/external-link.svg?raw'

const Component = href ? 'a' : 'button'
---

<Component href={href} class:list={[color, className]} {...rest}>
  <slot />
  <slot name="icon" />
  {showExternalIcon && <div class="ext-icon" set:html={extIcon} />}
</Component>

<style>
  button,
  a {
    font-family: var(--font-body);
    font-size: var(--font-02);
    font-weight: var(--font-weight-semibold);
    color: var(--button-text);
    border-radius: var(--br-01);
    padding-block: var(--sp-03);
    padding-inline: var(--sp-06);
    border: none;
    line-height: 1;
    letter-spacing: 0.02rem;
    display: inline-flex;
    justify-content: center;
    align-items: center;
    gap: var(--sp-02);
  }

  button:focus-visible,
  a:focus-visible {
    outline: var(--focus-ring);
    outline-offset: 3px;
  }

  button:hover,
  button:focus-visible,
  a:hover,
  a:focus-visible {
    cursor: pointer;
  }

  .primary {
    background-color: var(--button-primary);
    box-shadow: var(--button-primary-shadow);
    transition: all 250ms ease-out;
  }
  .primary:hover,
  .primary:focus-visible {
    background-color: var(--button-primary__hover);
  }

  .secondary {
    background-color: var(--button-secondary);
    box-shadow: var(--button-secondary-shadow);
    transition: all 250ms ease-out;
  }
  .secondary:hover,
  .secondary:focus-visible {
    background-color: var(--button-secondary__hover);
  }

  @media (max-width: 64rem) {
    button,
    a {
      font-size: var(--font-03);
      padding-block: var(--sp-05);
      padding-inline: var(--sp-06);
      border: none;
      line-height: 1;
      letter-spacing: 0.02rem;
      display: inline-flex;
      justify-content: center;
      align-items: center;
      gap: var(--sp-02);
    }
  }
</style>
